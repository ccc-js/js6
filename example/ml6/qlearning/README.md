# Q-learning 實作

## 程式

1. qlearing.js 為通用算法框架
2. qwalk1d.js 為 1 維隨機行走 (只有左右方向）的 qlearning 範例。
3. qwalk2d.js 為 2 維隨機行走（有上下左右方向）的 qlearning 範例。

## qwalk1d.js

qwalk1d.js 為 1 維隨機行走 (只有左右方向）的 qlearning 範例。

執行結果

```
$ node qwalk1d.js

======= dump: 0 =====
0:l=0.0000 r=0.0000
1:l=0.0000 r=0.0000
2:l=0.0000 r=0.0000
3:l=0.0000 r=0.0000
4:l=0.0000 r=0.0000
5:l=0.1000 r=0.0000
6:l=0.0000 r=0.0000
======= dump: 1 =====
0:l=0.0000 r=0.0000
1:l=0.0000 r=0.0000
2:l=0.0000 r=0.0000
3:l=0.0000 r=0.0000
4:l=0.0000 r=0.0000
5:l=0.1590 r=0.0041
6:l=0.0000 r=0.0000
======= dump: 2 =====
0:l=0.0000 r=0.0000
1:l=0.0000 r=0.0000
2:l=0.0000 r=0.0000
3:l=0.0000 r=0.0000
4:l=0.0000 r=0.0000
5:l=0.1590 r=0.0041
6:l=0.1099 r=0.0083
======= dump: 3 =====
0:l=0.0000 r=0.0000
1:l=0.0000 r=0.1000
2:l=0.0000 r=0.0000
3:l=0.0000 r=0.0000
4:l=0.0000 r=0.0000
5:l=0.1590 r=0.0041
6:l=0.1099 r=0.0083
...
======= dump: 196 =====
0:l=0.2237 r=0.5894
1:l=0.2251 r=0.6462
2:l=0.0000 r=0.0000
3:l=0.5542 r=0.1995
4:l=0.4109 r=0.1698
5:l=0.3262 r=0.1743
6:l=0.3497 r=0.1690
======= dump: 197 =====
0:l=0.2237 r=0.5894
1:l=0.2251 r=0.6816
2:l=0.0000 r=0.0000
3:l=0.5542 r=0.1995
4:l=0.4109 r=0.1698
5:l=0.3262 r=0.1743
6:l=0.3497 r=0.1690
======= dump: 198 =====
0:l=0.2237 r=0.5894
1:l=0.2251 r=0.6816
2:l=0.0000 r=0.0000
3:l=0.5542 r=0.1995
4:l=0.3441 r=0.1687
5:l=0.3262 r=0.1743
6:l=0.3497 r=0.1690
======= dump: 199 =====
0:l=0.2237 r=0.5894
1:l=0.2251 r=0.6816
2:l=0.0000 r=0.0000
3:l=0.5988 r=0.1995
4:l=0.3441 r=0.1687
5:l=0.3262 r=0.1743
6:l=0.3497 r=0.1690
```
## qwalk2d.js

qwalk2d.js 為 2 維隨機行走（有上下左右方向）的 qlearning 範例。

執行結果

```
$ node qwalk2d.js

======= dump: 0 =====
0,0:←0.0000→0.0000↑0.0000↓0.0000
0,1:←0.0000→0.1000↑0.0000↓0.0000
0,2:←0.0000→0.0000↑0.0000↓0.0000
0,3:←0.0000→0.0000↑0.0000↓0.0000
1,0:←0.0000→0.0000↑0.0000↓0.0000
1,1:←0.0000→0.0000↑0.0000↓0.0000
1,2:←0.0000→0.0000↑0.0000↓0.0000
1,3:←0.0000→0.0000↑0.0000↓0.0000
2,0:←0.0000→0.0000↑0.0000↓0.0000
2,1:←0.0000→0.0000↑0.0000↓0.0000
2,2:←0.0000→0.0000↑0.0000↓0.0000
2,3:←0.0000→0.0000↑0.0000↓0.0000
3,0:←0.0000→0.0000↑0.0000↓0.0000
3,1:←0.0000→0.0000↑0.0000↓0.0000
3,2:←0.0000→0.0000↑0.0000↓0.0000
3,3:←0.0000→0.0000↑0.0000↓0.0000
======= dump: 1 =====
0,0:←0.0000→0.0000↑0.0000↓0.0000
0,1:←0.0000→0.1000↑0.0000↓0.0000
0,2:←0.0000→0.0000↑0.0000↓0.0000
0,3:←0.0000→0.0000↑0.0000↓0.0000
1,0:←0.0000→0.0000↑0.0000↓0.0000
1,1:←0.0000→0.0000↑0.0000↓0.0000
1,2:←0.0000→0.0000↑0.0000↓0.0000
1,3:←0.0000→0.0000↑0.0000↓0.0000
2,0:←0.0000→0.0000↑0.0000↓0.0000
2,1:←0.0000→0.1000↑0.0000↓0.0000
2,2:←0.0000→0.0000↑0.0000↓0.0000
2,3:←0.0000→0.0000↑0.0000↓0.0000
3,0:←0.0000→0.0000↑0.0000↓0.0000
3,1:←0.0000→0.0000↑0.0000↓0.0000
3,2:←0.0000→0.0000↑0.0000↓0.0000
3,3:←0.0000→0.0000↑0.0000↓0.0000
======= dump: 2 =====
0,0:←0.0000→0.0000↑0.0000↓0.0000
0,1:←0.0000→0.1000↑0.0000↓0.0000
0,2:←0.0000→0.0000↑0.0000↓0.0000
0,3:←0.0000→0.0000↑0.0000↓0.0000
1,0:←0.0123→0.0000↑0.0072↓0.1000
1,1:←0.0000→0.0000↑0.0000↓0.0000
1,2:←0.0000→0.0000↑0.0000↓0.0000
1,3:←0.0000→0.0000↑0.0000↓0.0000
2,0:←0.0000→0.0000↑0.0000↓0.0000
2,1:←0.0000→0.1000↑0.0000↓0.0000
2,2:←0.0000→0.0000↑0.0000↓0.0000
2,3:←0.0000→0.0000↑0.0000↓0.0000
3,0:←0.0000→0.0000↑0.0000↓0.0000
3,1:←0.0000→0.0000↑0.0000↓0.0000
3,2:←0.0000→0.0000↑0.0000↓0.0000
3,3:←0.0000→0.0000↑0.0000↓0.0000
...
======= dump: 96 =====
0,0:←0.2263→0.3067↑0.2216↓0.2510
0,1:←0.0462→0.1833↑0.0581↓0.1939
0,2:←0.2000→0.3045↑0.1864↓0.2599
0,3:←0.1578→0.3007↑0.1336↓0.2510
1,0:←0.2014→0.2448↑0.2335↓0.2932
1,1:←0.1192→0.2378↑0.0859↓0.3020
1,2:←0.2335→0.2332↑0.2347↓0.3244
1,3:←0.1178→0.1501↑0.1409↓0.3537
2,0:←0.1202→0.2069↑0.1425↓0.2852
2,1:←0.1906→0.2798↑0.1881↓0.2285
2,2:←0.2175→0.2378↑0.2239↓0.3568
2,3:←0.2203→0.2936↑0.2242↓0.2366
3,0:←0.0403→0.3109↑0.0572↓0.0837
3,1:←0.2230→0.3217↑0.2148↓0.2648
3,2:←0.1096→0.1694↑0.1446↓0.2268
3,3:←0.0000→0.0000↑0.0000↓0.0000
======= dump: 97 =====
0,0:←0.2263→0.3067↑0.2216↓0.2510
0,1:←0.0462→0.1833↑0.0581↓0.1939
0,2:←0.2000→0.3045↑0.1864↓0.2599
0,3:←0.1578→0.3007↑0.1336↓0.2510
1,0:←0.2014→0.2448↑0.2335↓0.2932
1,1:←0.1192→0.2378↑0.0859↓0.3020
1,2:←0.2335→0.2332↑0.2347↓0.3244
1,3:←0.1178→0.1501↑0.1409↓0.3537
2,0:←0.1202→0.2069↑0.1425↓0.2852
2,1:←0.1906→0.2798↑0.1881↓0.2285
2,2:←0.2175→0.2375↑0.2239↓0.4211
2,3:←0.2203→0.2936↑0.2242↓0.2366
3,0:←0.0403→0.3109↑0.0572↓0.0837
3,1:←0.2230→0.3217↑0.2148↓0.2648
3,2:←0.1096→0.1694↑0.1446↓0.2268
3,3:←0.0000→0.0000↑0.0000↓0.0000
======= dump: 98 =====
0,0:←0.2263→0.3067↑0.2216↓0.2510
0,1:←0.0462→0.1833↑0.0581↓0.1939
0,2:←0.2000→0.3045↑0.1864↓0.2599
0,3:←0.1578→0.3007↑0.1336↓0.2510
1,0:←0.2014→0.2448↑0.2335↓0.2932
1,1:←0.1192→0.2378↑0.0859↓0.3020
1,2:←0.2335→0.2332↑0.2347↓0.3244
1,3:←0.1178→0.1501↑0.1409↓0.3537
2,0:←0.1202→0.2069↑0.1425↓0.2852
2,1:←0.2088→0.3176↑0.2252↓0.2397
2,2:←0.2175→0.2375↑0.2239↓0.4211
2,3:←0.2203→0.2936↑0.2242↓0.2366
3,0:←0.0403→0.3109↑0.0572↓0.0837
3,1:←0.2230→0.3217↑0.2148↓0.2648
3,2:←0.1096→0.1694↑0.1446↓0.2268
3,3:←0.0000→0.0000↑0.0000↓0.0000
======= dump: 99 =====
0,0:←0.2263→0.3067↑0.2216↓0.2510
0,1:←0.0462→0.1833↑0.0581↓0.1939
0,2:←0.2000→0.3045↑0.1864↓0.2599
0,3:←0.1578→0.3007↑0.1336↓0.2510
1,0:←0.2014→0.2448↑0.2335↓0.2932
1,1:←0.1192→0.2378↑0.0859↓0.3020
1,2:←0.2335→0.2332↑0.2347↓0.3244
1,3:←0.1178→0.1501↑0.1409↓0.3537
2,0:←0.1202→0.2069↑0.1425↓0.2852
2,1:←0.2088→0.3176↑0.2252↓0.2397
2,2:←0.2175→0.2375↑0.2239↓0.4211
2,3:←0.2320→0.3642↑0.2242↓0.2311
3,0:←0.0403→0.3109↑0.0572↓0.0837
3,1:←0.2230→0.3217↑0.2148↓0.2648
3,2:←0.1096→0.1694↑0.1446↓0.2268
3,3:←0.0000→0.0000↑0.0000↓0.0000
```

## 參考

* https://morvanzhou.github.io/tutorials/machine-learning/reinforcement-learning/2-1-general-rl/
* https://en.wikipedia.org/wiki/Q-learning
